<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>è¶Šå—èªå­¸ç¿’å°ç«™ v3</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="./manifest.json">
<meta name="theme-color" content="#ff6680">
<style>
.chip { display:inline-block; padding:6px 10px; border-radius:999px; border:1px solid #e8b9c4; margin:4px; cursor:pointer; background:#fff; }
.chip.active { background:#ff6680; color:#fff; border-color:#ff6680; }
</style>
</head>
<body>
<h1>è¶Šå—èªå­¸ç¿’å°ç«™ v3</h1>
<section>
<h2>è¶Šå—èªå­—æ¯è¡¨</h2>
<div id="alphabet"></div>
<h2>è²èª¿ç·´ç¿’</h2>
<div id="tones"></div>
</section>
<section>
<h2>æ•¸å­—ï¼‹é‡è©</h2>
<div id="numbers"></div>
</section>
<section>
<h2>ä¸»é¡Œå°è©±ï¼ˆå¯æ”¶è—ï¼‹æ¨™ç±¤ç¯©é¸ï¼‰</h2>
<div id="tagBar"></div>
<div id="dialogues"></div>
<button onclick="showFavs()">åªçœ‹æ”¶è—</button>
</section>
<section>
<h2>æ¸¬é©—éŠæˆ²</h2>
<button onclick="startQuiz()">é–‹å§‹æ¸¬é©—</button>
<div id="quiz"></div>
</section>
<script>
const ALPHABET=["A", "Ä‚", "Ã‚", "B", "C", "D", "Ä", "E", "ÃŠ", "G", "H", "I", "K", "L", "M", "N", "O", "Ã”", "Æ ", "P", "Q", "R", "S", "T", "U", "Æ¯", "V", "X", "Y"];
const TONES=[{"mark": "ma", "desc": "ngang (å¹³è², ç„¡è²èª¿ç¬¦è™Ÿ)"}, {"mark": "mÃ¡", "desc": "sáº¯c (é™½è², ä¸Šå‡)"}, {"mark": "mÃ ", "desc": "huyá»n (é™°è², ä¸‹é™)"}, {"mark": "máº£", "desc": "há»i (æ‹è², ä¸Šä¸‹å½)"}, {"mark": "mÃ£", "desc": "ngÃ£ (æ³¢è², ä¸Šæšæ–·è£‚)"}, {"mark": "máº¡", "desc": "náº·ng (é‡è², çŸ­ä¿ƒä¸‹é™)"}];
const NUMS={"1": "má»™t", "2": "hai", "3": "ba", "4": "bá»‘n", "5": "nÄƒm", "6": "sÃ¡u", "7": "báº£y", "8": "tÃ¡m", "9": "chÃ­n", "10": "mÆ°á»i"};
const COUNTERS=[{"counter": "cÃ¡i", "note": "ä¸€èˆ¬ç‰©å“"}, {"counter": "con", "note": "å‹•ç‰©"}, {"counter": "chiáº¿c", "note": "ä»¶/å°"}, {"counter": "táº¥m", "note": "å¼µ"}, {"counter": "quyá»ƒn", "note": "æœ¬ï¼ˆæ›¸ï¼‰"}];
const DIALOGS=[{"tag": "è¡£æœè³¼ç‰©", "vi": ["TÃ´i cÃ³ thá»ƒ thá»­ Ã¡o nÃ y khÃ´ng?", "VÃ¢ng, phÃ²ng thá»­ Ä‘á»“ á»Ÿ Ä‘áº±ng kia.", "Xin lá»—i, hÃ ng giáº£m giÃ¡ thÃ¬ khÃ´ng Ä‘Æ°á»£c thá»­."], "zh": ["é€™ä»¶è¡£æœå¯ä»¥è©¦ç©¿å—ï¼Ÿ", "å¯ä»¥ï¼Œè©¦è¡£é–“åœ¨é‚£é‚Šã€‚", "æŠ±æ­‰ï¼Œç‰¹åƒ¹å“ä¸èƒ½è©¦ç©¿ã€‚"]}, {"tag": "è¡£æœè³¼ç‰©", "vi": ["CÃ³ size lá»›n hÆ¡n khÃ´ng?", "CÃ³, Ä‘Ã¢y lÃ  size L.", "Xin lá»—i, chá»‰ cÃ²n size M thÃ´i."], "zh": ["æœ‰å¤§ä¸€é»çš„å°ºå¯¸å—ï¼Ÿ", "æœ‰ï¼Œé€™æ˜¯ L è™Ÿã€‚", "æŠ±æ­‰ï¼Œåªæœ‰ M è™Ÿäº†ã€‚"]}, {"tag": "é£Ÿå“è³¼ç‰©", "vi": ["CÃ¡i nÃ y bao nhiÃªu tiá»n?", "50 nghÃ¬n Ä‘á»“ng.", "30 nghÃ¬n Ä‘á»“ng má»™t kÃ½."], "zh": ["é€™å€‹å¤šå°‘éŒ¢ï¼Ÿ", "äº”è¬è¶Šç›¾ã€‚", "ä¸€å…¬æ–¤ä¸‰è¬è¶Šç›¾ã€‚"]}, {"tag": "é£Ÿå“è³¼ç‰©", "vi": ["CÃ²n tÆ°Æ¡i khÃ´ng?", "VÃ¢ng, hÃ´m nay má»›i nháº­p.", "CÃ²n ráº¥t tÆ°Æ¡i."], "zh": ["æ–°é®®å—ï¼Ÿ", "å¾ˆæ–°é®®ï¼Œä»Šå¤©å‰›åˆ°è²¨ã€‚", "é‚„å¾ˆæ–°é®®ã€‚"]}, {"tag": "é¤å»³", "vi": ["CÃ³ mÃ³n nÃ o Ä‘áº·c biá»‡t khÃ´ng?", "HÃ´m nay cÃ³ phá»Ÿ bÃ².", "Gá»i cuá»‘n ráº¥t ngon."], "zh": ["æœ‰æ¨è–¦çš„èœå—ï¼Ÿ", "ä»Šå¤©æœ‰ç‰›è‚‰æ²³ç²‰ã€‚", "ç”Ÿæ˜¥æ²å¾ˆå¥½åƒã€‚"]}, {"tag": "é¤å»³", "vi": ["LÃ m Æ¡n cho Ã­t cay thÃ´i.", "VÃ¢ng, tÃ´i sáº½ cho Ã­t á»›t thÃ´i.", "KhÃ´ng cho á»›t cÅ©ng Ä‘Æ°á»£c."], "zh": ["è«‹åšä¸è¾£ä¸€é»ã€‚", "å¥½ï¼Œæˆ‘å°‘æ”¾è¾£æ¤’ã€‚", "ä¹Ÿå¯ä»¥å®Œå…¨ä¸æ”¾è¾£æ¤’ã€‚"]}, {"tag": "æ‰“æ‹›å‘¼", "vi": ["Xin chÃ o!", "ChÃ o báº¡n!", "Xin chÃ o anh/chá»‹."], "zh": ["ä½ å¥½ï¼", "ä½ å¥½ï¼", "æ‚¨å¥½ï¼"]}, {"tag": "æ‰“æ‹›å‘¼", "vi": ["Táº¡m biá»‡t!", "Háº¹n gáº·p láº¡i!", "ChÃ o táº¡m biá»‡t."], "zh": ["å†è¦‹ï¼", "ä¸‹æ¬¡è¦‹ï¼", "å†è¦‹ï¼"]}, {"tag": "ç¥è³€", "vi": ["ChÃºc má»«ng sinh nháº­t!", "Cáº£m Æ¡n báº¡n!"], "zh": ["ç”Ÿæ—¥å¿«æ¨‚ï¼", "è¬è¬ä½ ï¼"]}, {"tag": "ç¥è³€", "vi": ["ChÃºc má»«ng nÄƒm má»›i!", "ChÃºc báº¡n nhiá»u may máº¯n!", "ChÃºc sá»©c khá»e dá»“i dÃ o!"], "zh": ["æ–°å¹´å¿«æ¨‚ï¼", "ç¥ä½ å¹¸é‹ï¼", "ç¥ä½ å¥åº·ï¼"]}, {"tag": "äº¤é€š", "vi": ["Äi Ä‘áº¿n sÃ¢n bay háº¿t bao nhiÃªu tiá»n?", "Khoáº£ng 200 nghÃ¬n Ä‘á»“ng.", "TÃ¹y vÃ o giao thÃ´ng."], "zh": ["åˆ°æ©Ÿå ´è¦å¤šå°‘éŒ¢ï¼Ÿ", "å¤§æ¦‚äºŒåè¬è¶Šç›¾ã€‚", "è¦çœ‹äº¤é€šç‹€æ³ã€‚"]}, {"tag": "äº¤é€š", "vi": ["Xe buÃ½t nÃ y Ä‘i Ä‘Ã¢u?", "Äi Ä‘áº¿n trung tÃ¢m thÃ nh phá»‘.", "Dá»«ng á»Ÿ báº¿n cuá»‘i lÃ  chá»£ Báº¿n ThÃ nh."], "zh": ["é€™ç­å…¬è»Šå»å“ªè£¡ï¼Ÿ", "å»å¸‚ä¸­å¿ƒã€‚", "åœåœ¨æ¿±åŸå¸‚å ´ã€‚"]}];
function speak(t){let u=new SpeechSynthesisUtterance(t);u.lang='vi-VN';speechSynthesis.speak(u);}
const ab=document.getElementById('alphabet');ALPHABET.forEach(ch=>{let d=document.createElement('button');d.textContent=ch;d.onclick=()=>speak(ch);ab.appendChild(d);});
const tn=document.getElementById('tones');TONES.forEach(o=>{let d=document.createElement('button');d.textContent=o.mark+" ("+o.desc+")";d.onclick=()=>speak(o.mark);tn.appendChild(d);});
const nm=document.getElementById('numbers');for (let i=1;i<=10;i++){let d=document.createElement('div');d.textContent=i+": "+NUMS[i];d.onclick=()=>speak(NUMS[i]);nm.appendChild(d);}COUNTERS.forEach(c=>{let d=document.createElement('div');d.textContent=c.counter+" - "+c.note;nm.appendChild(d);});

let favs=new Set(JSON.parse(localStorage.getItem('vnFavs')||"[]"));
function toggleFav(idx){if(favs.has(idx))favs.delete(idx);else favs.add(idx);localStorage.setItem('vnFavs',JSON.stringify(Array.from(favs)));renderDialogues();}
function showFavs(){renderDialogues(true);}

const tagBar=document.getElementById('tagBar');const allTags=[...new Set(DIALOGS.map(d=>d.tag))];
function renderTags(){tagBar.innerHTML='';allTags.forEach(t=>{const chip=document.createElement('span');chip.className='chip';chip.textContent=t;if(activeTags.has(t))chip.classList.add('active');chip.onclick=()=>{if(activeTags.has(t))activeTags.delete(t);else activeTags.add(t);renderDialogues();renderTags();};tagBar.appendChild(chip);});}
const activeTags=new Set();renderTags();

function renderDialogues(onlyFav){const dl=document.getElementById('dialogues');dl.innerHTML="";DIALOGS.forEach((d,idx)=>{if(onlyFav&&!favs.has(idx))return;if(activeTags.size&&!activeTags.has(d.tag))return;let box=document.createElement('div');box.innerHTML="<h3>"+d.tag+"</h3>";d.vi.forEach((line,i)=>{let p=document.createElement('div');p.textContent=(i==0?"â“ ":"ğŸ—£ï¸ ")+line+" â€” "+d.zh[i];let b=document.createElement('button');b.textContent='â–¶';b.onclick=()=>speak(line);p.appendChild(b);if(i==0){let f=document.createElement('button');f.textContent=favs.has(idx)?"â¤ï¸":"ğŸ¤";f.onclick=()=>toggleFav(idx);p.appendChild(f);}box.appendChild(p);});dl.appendChild(box);});}
renderDialogues(false);

let quizData=[];let score=0;let total=0;
function startQuiz(){quizData=[];DIALOGS.forEach(d=>d.vi.forEach((line,i)=>quizData.push({vi:line,zh:d.zh[i]})));quizData=quizData.sort(()=>Math.random()-0.5).slice(0,10);score=0;total=0;renderQuiz();}
function renderQuiz(){const qd=document.getElementById('quiz');if(total>=quizData.length){qd.innerHTML="å®Œæˆï¼ å¾—åˆ†:"+score+"/"+quizData.length;return;}let q=quizData[total];const allZh=DIALOGS.flatMap(d=>d.zh);let opts=new Set([q.zh]);while(opts.size<4)opts.add(allZh[Math.floor(Math.random()*allZh.length)]);opts=[...opts].sort(()=>Math.random()-0.5);qd.innerHTML="<div>ğŸ—£ï¸ "+q.vi+"</div>";opts.forEach(opt=>{let b=document.createElement('button');b.textContent=opt;b.onclick=()=>{if(opt===q.zh)score++;total++;renderQuiz();};qd.appendChild(b);});qd.innerHTML+="<div>åˆ†æ•¸:"+score+"/"+total+"</div>";}
</script>
</body>
</html>