<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>越南語學習小站 v4.1</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="./manifest.json">
<meta name="theme-color" content="#ff6680">
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans CJK TC",sans-serif;margin:0;background:#fff4f7;color:#222}
header{background:#ff6680;color:#fff;padding:16px;text-align:center}
main{max-width:1100px;margin:0 auto;padding:16px}
h2{color:#ff6680;margin-top:24px}
.card{display:inline-block;margin:6px;padding:8px 10px;background:#fff;border:1px solid #ffd2dc;border-radius:10px;cursor:pointer}
.box{background:#fff;border:1px solid #ffd2dc;border-radius:12px;padding:12px;margin:12px 0}
.btn{background:#ff6680;border:0;color:#fff;padding:8px 12px;border-radius:8px;cursor:pointer;margin:4px 6px}
.btn.ghost{background:#fff;color:#ff6680;border:2px solid #ff6680}
.small{font-size:12px;color:#666}
.dialogue{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;border-bottom:1px dashed #ffd2dc;padding:8px 0}
</style>
</head>
<body>
<header><h1>越南語學習小站 v4.1</h1><div class="small">完整功能版（PWA）</div></header>
<main>
<section class="box">
  <h2>語音偵測</h2>
  <button class="btn" onclick="testVN()">▶ 測試越南語：Xin chào</button>
  <div id="voiceInfo" class="small"></div>
</section>

<section class="box">
  <h2>字母表</h2>
  <div id="alphabet"></div>
</section>

<section class="box">
  <h2>聲調練習</h2>
  <div id="tones"></div>
</section>

<section class="box">
  <h2>數字＋量詞</h2>
  <div id="numbers"></div>
</section>

<section class="box">
  <h2>數字 1–100</h2>
  <div id="num100"></div>
</section>

<section class="box">
  <h2>主題對話</h2>
  <div id="dialogues"></div>
</section>

<section class="box">
  <h2>隨機測驗遊戲</h2>
  <button class="btn" onclick="startQuiz()">開始測驗</button>
  <div id="quiz"></div>
</section>

<section class="box">
  <h2>模擬鑑定測驗（50 題）</h2>
  <button class="btn" onclick="startExam()">開始模擬</button>
  <div id="exam"></div>
</section>
</main>

<script>
const ALPHABET = [{"char": "A", "say": "a"}, {"char": "Ă", "say": "ă"}, {"char": "Â", "say": "â"}, {"char": "B", "say": "bê"}, {"char": "C", "say": "xê"}, {"char": "D", "say": "dê"}, {"char": "Đ", "say": "đê"}, {"char": "E", "say": "e"}, {"char": "Ê", "say": "ê"}, {"char": "G", "say": "gờ"}, {"char": "H", "say": "hát"}, {"char": "I", "say": "i"}, {"char": "K", "say": "ca"}, {"char": "L", "say": "e-lờ"}, {"char": "M", "say": "em"}, {"char": "N", "say": "en"}, {"char": "O", "say": "o"}, {"char": "Ô", "say": "ô"}, {"char": "Ơ", "say": "ơ"}, {"char": "P", "say": "pê"}, {"char": "Q", "say": "quy"}, {"char": "R", "say": "er"}, {"char": "S", "say": "ét"}, {"char": "T", "say": "tê"}, {"char": "U", "say": "u"}, {"char": "Ư", "say": "ư"}, {"char": "V", "say": "vê"}, {"char": "X", "say": "ích"}, {"char": "Y", "say": "i dài"}];
const TONES = [{"mark": "ma", "desc": "ngang (平聲)"}, {"mark": "má", "desc": "sắc (上升)"}, {"mark": "mà", "desc": "huyền (下降)"}, {"mark": "mả", "desc": "hỏi (拐聲)"}, {"mark": "mã", "desc": "ngã (波聲)"}, {"mark": "mạ", "desc": "nặng (重聲)"}];
const NUMS = {"1": "một", "2": "hai", "3": "ba", "4": "bốn", "5": "năm", "6": "sáu", "7": "bảy", "8": "tám", "9": "chín", "10": "mười"};
const COUNTERS = [{"counter": "cái", "note": "一般物品（衣服、杯子）"}, {"counter": "con", "note": "動物（狗、貓、魚）"}, {"counter": "chiếc", "note": "件/台（車、機器、衣服）"}, {"counter": "tấm", "note": "張（桌子、紙張）"}, {"counter": "quyển", "note": "本（書、雜誌）"}];
const DIALOGS = [{"tag": "衣服購物", "vi": ["Tôi có thể thử áo này không?", "Vâng, phòng thử đồ ở đằng kia.", "Xin lỗi, hàng giảm giá thì không được thử."], "zh": ["這件衣服可以試穿嗎？", "可以，試衣間在那邊。", "抱歉，特價品不能試穿。"]}, {"tag": "衣服購物", "vi": ["Có size lớn hơn không?", "Có, đây là size L.", "Xin lỗi, chỉ còn size M thôi."], "zh": ["有大一點的尺寸嗎？", "有，這是 L 號。", "抱歉，只有 M 號了。"]}, {"tag": "食品購物", "vi": ["Cái này bao nhiêu tiền?", "50 nghìn đồng.", "30 nghìn đồng một ký."], "zh": ["這個多少錢？", "五萬越盾。", "一公斤三萬越盾。"]}, {"tag": "食品購物", "vi": ["Còn tươi không?", "Vâng, hôm nay mới nhập.", "Còn rất tươi."], "zh": ["新鮮嗎？", "很新鮮，今天剛到貨。", "還很新鮮。"]}, {"tag": "餐廳", "vi": ["Có món nào đặc biệt không?", "Hôm nay có phở bò.", "Gỏi cuốn rất ngon."], "zh": ["有推薦的菜嗎？", "今天有牛肉河粉。", "生春捲很好吃。"]}, {"tag": "餐廳", "vi": ["Làm ơn cho ít cay thôi.", "Vâng, tôi sẽ cho ít ớt thôi.", "Không cho ớt cũng được."], "zh": ["請做不辣一點。", "好，我少放辣椒。", "也可以完全不放辣椒。"]}, {"tag": "打招呼", "vi": ["Xin chào!", "Chào bạn!", "Xin chào anh/chị."], "zh": ["你好！", "你好！", "您好！"]}, {"tag": "打招呼", "vi": ["Tạm biệt!", "Hẹn gặp lại!", "Chào tạm biệt."], "zh": ["再見！", "下次見！", "再見！"]}, {"tag": "祝賀", "vi": ["Chúc mừng sinh nhật!", "Cảm ơn bạn!"], "zh": ["生日快樂！", "謝謝你！"]}, {"tag": "祝賀", "vi": ["Chúc mừng năm mới!", "Chúc bạn nhiều may mắn!", "Chúc sức khỏe dồi dào!"], "zh": ["新年快樂！", "祝你幸運！", "祝你健康！"]}, {"tag": "交通", "vi": ["Đi đến sân bay hết bao nhiêu tiền?", "Khoảng 200 nghìn đồng.", "Tùy vào giao thông."], "zh": ["到機場要多少錢？", "大概二十萬越盾。", "要看交通狀況。"]}, {"tag": "交通", "vi": ["Xe buýt này đi đâu?", "Đi đến trung tâm thành phố.", "Dừng ở bến cuối là chợ Bến Thành."], "zh": ["這班公車去哪裡？", "去市中心。", "停在濱城市場。"]}];
const VN100 = {"1": "một", "2": "hai", "3": "ba", "4": "bốn", "5": "năm", "6": "sáu", "7": "bảy", "8": "tám", "9": "chín", "10": "mười", "11": "mười một", "12": "mười hai", "13": "mười ba", "14": "mười bốn", "15": "mười lăm", "16": "mười sáu", "17": "mười bảy", "18": "mười tám", "19": "mười chín", "20": "hai mươi", "21": "hai mươi mốt", "22": "hai mươi hai", "23": "hai mươi ba", "24": "hai mươi bốn", "25": "hai mươi lăm", "26": "hai mươi sáu", "27": "hai mươi bảy", "28": "hai mươi tám", "29": "hai mươi chín", "30": "ba mươi", "31": "ba mươi mốt", "32": "ba mươi hai", "33": "ba mươi ba", "34": "ba mươi bốn", "35": "ba mươi lăm", "36": "ba mươi sáu", "37": "ba mươi bảy", "38": "ba mươi tám", "39": "ba mươi chín", "40": "bốn mươi", "41": "bốn mươi mốt", "42": "bốn mươi hai", "43": "bốn mươi ba", "44": "bốn mươi bốn", "45": "bốn mươi lăm", "46": "bốn mươi sáu", "47": "bốn mươi bảy", "48": "bốn mươi tám", "49": "bốn mươi chín", "50": "năm mươi", "51": "năm mươi mốt", "52": "năm mươi hai", "53": "năm mươi ba", "54": "năm mươi bốn", "55": "năm mươi lăm", "56": "năm mươi sáu", "57": "năm mươi bảy", "58": "năm mươi tám", "59": "năm mươi chín", "60": "sáu mươi", "61": "sáu mươi mốt", "62": "sáu mươi hai", "63": "sáu mươi ba", "64": "sáu mươi bốn", "65": "sáu mươi lăm", "66": "sáu mươi sáu", "67": "sáu mươi bảy", "68": "sáu mươi tám", "69": "sáu mươi chín", "70": "bảy mươi", "71": "bảy mươi mốt", "72": "bảy mươi hai", "73": "bảy mươi ba", "74": "bảy mươi bốn", "75": "bảy mươi lăm", "76": "bảy mươi sáu", "77": "bảy mươi bảy", "78": "bảy mươi tám", "79": "bảy mươi chín", "80": "tám mươi", "81": "tám mươi mốt", "82": "tám mươi hai", "83": "tám mươi ba", "84": "tám mươi bốn", "85": "tám mươi lăm", "86": "tám mươi sáu", "87": "tám mươi bảy", "88": "tám mươi tám", "89": "tám mươi chín", "90": "chín mươi", "91": "chín mươi mốt", "92": "chín mươi hai", "93": "chín mươi ba", "94": "chín mươi bốn", "95": "chín mươi lăm", "96": "chín mươi sáu", "97": "chín mươi bảy", "98": "chín mươi tám", "99": "chín mươi chín", "100": "mười mươi"};
const EXAM = [{"q": "題目 1: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "多少錢", "再見", "謝謝"], "ans": "你好"}, {"q": "題目 2: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["謝謝", "你好", "多少錢", "再見"], "ans": "你好"}, {"q": "題目 3: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "多少錢", "再見", "謝謝"], "ans": "你好"}, {"q": "題目 4: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "多少錢", "謝謝", "你好"], "ans": "你好"}, {"q": "題目 5: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["多少錢", "再見", "謝謝", "你好"], "ans": "你好"}, {"q": "題目 6: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "多少錢", "再見", "謝謝"], "ans": "你好"}, {"q": "題目 7: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "你好", "多少錢", "謝謝"], "ans": "你好"}, {"q": "題目 8: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "多少錢", "謝謝", "你好"], "ans": "你好"}, {"q": "題目 9: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["多少錢", "再見", "你好", "謝謝"], "ans": "你好"}, {"q": "題目 10: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["多少錢", "謝謝", "你好", "再見"], "ans": "你好"}, {"q": "題目 11: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "你好", "謝謝", "多少錢"], "ans": "你好"}, {"q": "題目 12: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["謝謝", "你好", "再見", "多少錢"], "ans": "你好"}, {"q": "題目 13: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "多少錢", "你好", "謝謝"], "ans": "你好"}, {"q": "題目 14: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "謝謝", "多少錢", "你好"], "ans": "你好"}, {"q": "題目 15: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["謝謝", "你好", "再見", "多少錢"], "ans": "你好"}, {"q": "題目 16: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["多少錢", "謝謝", "你好", "再見"], "ans": "你好"}, {"q": "題目 17: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "謝謝", "你好", "多少錢"], "ans": "你好"}, {"q": "題目 18: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "再見", "謝謝", "多少錢"], "ans": "你好"}, {"q": "題目 19: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "謝謝", "再見", "多少錢"], "ans": "你好"}, {"q": "題目 20: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "多少錢", "再見", "謝謝"], "ans": "你好"}, {"q": "題目 21: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "多少錢", "你好", "謝謝"], "ans": "你好"}, {"q": "題目 22: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["多少錢", "再見", "你好", "謝謝"], "ans": "你好"}, {"q": "題目 23: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["謝謝", "你好", "多少錢", "再見"], "ans": "你好"}, {"q": "題目 24: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["多少錢", "再見", "你好", "謝謝"], "ans": "你好"}, {"q": "題目 25: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "再見", "多少錢", "謝謝"], "ans": "你好"}, {"q": "題目 26: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "謝謝", "再見", "多少錢"], "ans": "你好"}, {"q": "題目 27: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "謝謝", "你好", "多少錢"], "ans": "你好"}, {"q": "題目 28: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["謝謝", "多少錢", "再見", "你好"], "ans": "你好"}, {"q": "題目 29: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["多少錢", "你好", "謝謝", "再見"], "ans": "你好"}, {"q": "題目 30: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "再見", "多少錢", "謝謝"], "ans": "你好"}, {"q": "題目 31: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "再見", "謝謝", "多少錢"], "ans": "你好"}, {"q": "題目 32: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "多少錢", "謝謝", "你好"], "ans": "你好"}, {"q": "題目 33: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "謝謝", "再見", "多少錢"], "ans": "你好"}, {"q": "題目 34: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "你好", "多少錢", "謝謝"], "ans": "你好"}, {"q": "題目 35: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "你好", "多少錢", "謝謝"], "ans": "你好"}, {"q": "題目 36: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["謝謝", "再見", "多少錢", "你好"], "ans": "你好"}, {"q": "題目 37: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "多少錢", "你好", "謝謝"], "ans": "你好"}, {"q": "題目 38: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["謝謝", "你好", "再見", "多少錢"], "ans": "你好"}, {"q": "題目 39: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "謝謝", "再見", "多少錢"], "ans": "你好"}, {"q": "題目 40: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "多少錢", "你好", "謝謝"], "ans": "你好"}, {"q": "題目 41: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["多少錢", "你好", "謝謝", "再見"], "ans": "你好"}, {"q": "題目 42: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["多少錢", "你好", "再見", "謝謝"], "ans": "你好"}, {"q": "題目 43: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "謝謝", "再見", "多少錢"], "ans": "你好"}, {"q": "題目 44: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["謝謝", "再見", "你好", "多少錢"], "ans": "你好"}, {"q": "題目 45: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["多少錢", "再見", "謝謝", "你好"], "ans": "你好"}, {"q": "題目 46: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["你好", "謝謝", "多少錢", "再見"], "ans": "你好"}, {"q": "題目 47: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "多少錢", "謝謝", "你好"], "ans": "你好"}, {"q": "題目 48: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["謝謝", "再見", "多少錢", "你好"], "ans": "你好"}, {"q": "題目 49: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["再見", "謝謝", "多少錢", "你好"], "ans": "你好"}, {"q": "題目 50: 'xin chào' 的正確中文意思是？", "vi": "xin chào", "opts": ["多少錢", "再見", "你好", "謝謝"], "ans": "你好"}];

function getVNVoice(){ const v=speechSynthesis.getVoices(); return v.find(x=>x.lang && x.lang.toLowerCase().startsWith('vi')); }
function speak(text, fallback){ const v=getVNVoice(); const u=new SpeechSynthesisUtterance(text); if(v) u.voice=v; else { u.lang='en-US'; u.text=fallback||text; } speechSynthesis.speak(u); }
function testVN(){ const v=getVNVoice(); const info=document.getElementById('voiceInfo'); if(v) info.textContent=`偵測到越南語語音：${v.name} (${v.lang})`; else info.textContent='未偵測到越南語語音，已使用英文 fallback。建議於系統安裝越南語 voice。'; speak('Xin chào','Xin chao'); }

const ab=document.getElementById('alphabet');
ALPHABET.forEach(o=>{ const b=document.createElement('button'); b.className='card'; b.textContent=o.char; b.onclick=()=>speak(o.char,o.say); ab.appendChild(b); });

const tn=document.getElementById('tones');
TONES.forEach(o=>{ const b=document.createElement('button'); b.className='card'; b.textContent=`${o.mark} (${o.desc})`; b.onclick=()=>speak(o.mark,o.mark); tn.appendChild(b); });

const nm=document.getElementById('numbers');
for(let i=1;i<=10;i++){ const d=document.createElement('div'); d.className='card'; d.textContent=`${i}: ${NUMS[i]}`; d.onclick=()=>speak(NUMS[i],NUMS[i]); nm.appendChild(d); }
COUNTERS.forEach(c=>{ const d=document.createElement('div'); d.className='card'; d.textContent=`${c.counter} — ${c.note}`; nm.appendChild(d); });

const n100=document.getElementById('num100');
for(let i=1;i<=100;i++){ const d=document.createElement('div'); d.className='card'; d.textContent=`${i}: ${VN100[i]}`; d.onclick=()=>speak(VN100[i],VN100[i]); n100.appendChild(d); }

const dl=document.getElementById('dialogues');
DIALOGS.forEach(d=>{ const box=document.createElement('div'); box.className='box'; box.innerHTML=`<b>${d.tag}</b>`; d.vi.forEach((line,i)=>{ const row=document.createElement('div'); row.className='dialogue'; const left=document.createElement('div'); left.innerHTML = `<div>${i===0?'❓ ':'🗣️ '}${line}</div><div class="small">— ${d.zh[i]||''}</div>`; const right=document.createElement('div'); const sp=document.createElement('button'); sp.className='btn'; sp.textContent='▶ 朗讀'; sp.onclick=()=>speak(line,line); right.appendChild(sp); row.appendChild(left); row.appendChild(right); box.appendChild(row); }); dl.appendChild(box); });

let quizData=[],score=0,total=0;
function startQuiz(){ quizData=[]; DIALOGS.forEach(d=>d.vi.forEach((l,i)=>quizData.push({vi:l, zh:d.zh[i]||''}))); quizData=quizData.sort(()=>Math.random()-0.5).slice(0,10); score=0; total=0; renderQuiz(); }
function renderQuiz(){ const qd=document.getElementById('quiz'); if(total>=quizData.length){ qd.innerHTML=`完成！得分：${score}/${quizData.length}`; return; } const q=quizData[total]; const allZh=[].concat(...DIALOGS.map(d=>d.zh)); const set=new Set([q.zh]); while(set.size<4) set.add(allZh[Math.floor(Math.random()*allZh.length)]||"（空）"); const opts=[...set].sort(()=>Math.random()-0.5); qd.innerHTML=`<div>🗣️ ${q.vi}</div>`; opts.forEach(opt=>{ const b=document.createElement('button'); b.className='btn ghost'; b.textContent=opt; b.onclick=()=>{ if(opt===q.zh) score++; total++; renderQuiz(); }; qd.appendChild(b); }); }

let examIdx=0, examScore=0;
function startExam(){ examIdx=0; examScore=0; renderExam(); }
function renderExam(){ const div=document.getElementById('exam'); if(examIdx>=EXAM.length){ div.innerHTML=`模擬完成！得分：${examScore}/${EXAM.length}`; return; } const q=EXAM[examIdx]; div.innerHTML=`<div><b>${q.q}</b></div>`; q.opts.forEach(opt=>{ const b=document.createElement('button'); b.className='btn ghost'; b.textContent=opt; b.onclick=()=>{ if(opt===q.ans) examScore++; examIdx++; renderExam(); }; div.appendChild(b); }); }
</script>
</body>
</html>
