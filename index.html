<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è¶Šå—èªå­¸ç¿’å°ç«™ v4.1ï¼ˆå–®æª”æ€¥æ•‘ç‰ˆï¼‰</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans CJK TC",sans-serif;margin:0;background:#fff4f7;color:#222}
header{background:#ff6680;color:#fff;padding:16px;text-align:center}
section{max-width:1000px;margin:0 auto;padding:16px}
h2{color:#ff6680}
.card{display:inline-block;margin:6px;padding:8px 10px;background:#fff;border:1px solid #ffd2dc;border-radius:10px;cursor:pointer}
.row{display:flex;gap:6px;flex-wrap:wrap;align-items:center}
.box{background:#fff;border:1px solid #ffd2dc;border-radius:12px;padding:12px;margin:10px 0}
.btn{background:#ff6680;border:0;color:#fff;padding:8px 12px;border-radius:8px;cursor:pointer}
.btn.ghost{background:#fff;color:#ff6680;border:2px solid #ff6680}
.small{font-size:12px;color:#666}
.dialogue{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;border-bottom:1px dashed #ffd2dc;padding:8px 0}
</style>
</head>
<body>
<header><h1>è¶Šå—èªå­¸ç¿’å°ç«™ v4.1ï¼ˆå–®æª”æ€¥æ•‘ç‰ˆï¼‰</h1><div class="small">è‹¥é€™ç‰ˆèƒ½æ­£å¸¸é¡¯ç¤ºï¼Œä»£è¡¨ä½ çš„ GitHub Pages éƒ¨ç½²è·¯å¾‘æ²’å•é¡Œã€‚</div></header>

<section class="box">
  <h2>èªéŸ³æ¸¬è©¦</h2>
  <div class="row">
    <button class="btn" onclick="testVN()">â–¶ æ¸¬è©¦ï¼šXin chÃ o</button>
    <div id="voiceInfo" class="small"></div>
  </div>
</section>

<section class="box">
  <h2>å­—æ¯è¡¨</h2>
  <div id="alphabet" class="row"></div>
</section>

<section class="box">
  <h2>è²èª¿</h2>
  <div id="tones" class="row"></div>
</section>

<section class="box">
  <h2>æ•¸å­—ï¼‹é‡è©</h2>
  <div id="numbers"></div>
</section>

<section class="box">
  <h2>æ•¸å­— 1â€“100</h2>
  <div id="num100"></div>
</section>

<section class="box">
  <h2>ä¸»é¡Œå°è©±</h2>
  <div id="dialogues"></div>
</section>

<section class="box">
  <h2>éš¨æ©Ÿæ¸¬é©—éŠæˆ²</h2>
  <button class="btn" onclick="startQuiz()">é–‹å§‹æ¸¬é©—</button>
  <div id="quiz" style="margin-top:8px;"></div>
</section>

<section class="box">
  <h2>æ¨¡æ“¬é‘‘å®šæ¸¬é©—ï¼ˆ50 é¡Œï¼‰</h2>
  <button class="btn" onclick="startExam()">é–‹å§‹æ¨¡æ“¬</button>
  <div id="exam" style="margin-top:8px;"></div>
</section>

<script>
const ALPHABET=[
 {"char":"A","say":"a"},{"char":"Ä‚","say":"Äƒ"},{"char":"Ã‚","say":"Ã¢"},{"char":"B","say":"bÃª"},{"char":"C","say":"xÃª"},
 {"char":"D","say":"dÃª"},{"char":"Ä","say":"Ä‘Ãª"},{"char":"E","say":"e"},{"char":"ÃŠ","say":"Ãª"},{"char":"G","say":"gá»"},
 {"char":"H","say":"hÃ¡t"},{"char":"I","say":"i"},{"char":"K","say":"ca"},{"char":"L","say":"e-lá»"},{"char":"M","say":"em"},
 {"char":"N","say":"en"},{"char":"O","say":"o"},{"char":"Ã”","say":"Ã´"},{"char":"Æ ","say":"Æ¡"},{"char":"P","say":"pÃª"},
 {"char":"Q","say":"quy"},{"char":"R","say":"er"},{"char":"S","say":"Ã©t"},{"char":"T","say":"tÃª"},{"char":"U","say":"u"},
 {"char":"Æ¯","say":"Æ°"},{"char":"V","say":"vÃª"},{"char":"X","say":"Ã­ch"},{"char":"Y","say":"i dÃ i"}
];
const TONES=[{"mark":"ma","desc":"ngang"},{"mark":"mÃ¡","desc":"sáº¯c"},{"mark":"mÃ ","desc":"huyá»n"},
             {"mark":"máº£","desc":"há»i"},{"mark":"mÃ£","desc":"ngÃ£"},{"mark":"máº¡","desc":"náº·ng"}];
const NUMS={1:"má»™t",2:"hai",3:"ba",4:"bá»‘n",5:"nÄƒm",6:"sÃ¡u",7:"báº£y",8:"tÃ¡m",9:"chÃ­n",10:"mÆ°á»i"};
const COUNTERS=[
 {"counter":"cÃ¡i","note":"ä¸€èˆ¬ç‰©å“ï¼ˆè¡£æœã€æ¯å­ï¼‰"},
 {"counter":"con","note":"å‹•ç‰©ï¼ˆç‹—ã€è²“ã€é­šï¼‰"},
 {"counter":"chiáº¿c","note":"ä»¶/å°ï¼ˆè»Šã€æ©Ÿå™¨ã€è¡£æœï¼‰"},
 {"counter":"táº¥m","note":"å¼µï¼ˆæ¡Œå­ã€ç´™å¼µï¼‰"},
 {"counter":"quyá»ƒn","note":"æœ¬ï¼ˆæ›¸ã€é›œèªŒï¼‰"}
];
const DIALOGS=[
 {"tag":"è¡£æœè³¼ç‰©","vi":["TÃ´i cÃ³ thá»ƒ thá»­ Ã¡o nÃ y khÃ´ng?","VÃ¢ng, phÃ²ng thá»­ Ä‘á»“ á»Ÿ Ä‘áº±ng kia.","Xin lá»—i, hÃ ng giáº£m giÃ¡ thÃ¬ khÃ´ng Ä‘Æ°á»£c thá»­."],
  "zh":["é€™ä»¶è¡£æœå¯ä»¥è©¦ç©¿å—ï¼Ÿ","å¯ä»¥ï¼Œè©¦è¡£é–“åœ¨é‚£é‚Šã€‚","æŠ±æ­‰ï¼Œç‰¹åƒ¹å“ä¸èƒ½è©¦ç©¿ã€‚"]},
 {"tag":"é¤å»³","vi":["CÃ³ mÃ³n nÃ o Ä‘áº·c biá»‡t khÃ´ng?","HÃ´m nay cÃ³ phá»Ÿ bÃ².","Gá»i cuá»‘n ráº¥t ngon."],
  "zh":["æœ‰æ¨è–¦çš„èœå—ï¼Ÿ","ä»Šå¤©æœ‰ç‰›è‚‰æ²³ç²‰ã€‚","ç”Ÿæ˜¥æ²å¾ˆå¥½åƒã€‚"]},
 {"tag":"äº¤é€š","vi":["Xe buÃ½t nÃ y Ä‘i Ä‘Ã¢u?","Äi Ä‘áº¿n trung tÃ¢m thÃ nh phá»‘.","Dá»«ng á»Ÿ báº¿n cuá»‘i lÃ  chá»£ Báº¿n ThÃ nh."],
  "zh":["é€™ç­å…¬è»Šå»å“ªè£¡ï¼Ÿ","å»å¸‚ä¸­å¿ƒã€‚","åœåœ¨æ¿±åŸå¸‚å ´ã€‚"]}
];

// Numbers 1â€“100
const VN100=(function(){
  const nums=NUMS;
  function w(n){
    if(n<=10) return nums[n];
    if(n<20){ if(n===15) return "mÆ°á»i lÄƒm"; return "mÆ°á»i "+nums[n-10]; }
    const tens=Math.floor(n/10), ones=n%10;
    const tensw = tens>1 ? nums[tens]+" mÆ°Æ¡i" : "mÆ°á»i";
    if(ones===0) return tensw;
    if(ones===1) return tens>1 ? tensw+" má»‘t" : tensw+" má»™t";
    if(ones===5) return tensw+" lÄƒm";
    return tensw+" "+nums[ones];
  }
  const map={}; for(let i=1;i<=100;i++) map[i]=w(i); return map;
})();

function getVNVoice(){const v=speechSynthesis.getVoices();return v.find(x=>x.lang && x.lang.toLowerCase().startsWith('vi'));}
function speak(t,f){const v=getVNVoice();const u=new SpeechSynthesisUtterance(t);if(v)u.voice=v;else{u.lang='en-US';u.text=f||t;}speechSynthesis.speak(u);}
function testVN(){ const v=getVNVoice(); const info=document.getElementById('voiceInfo'); if(v){info.textContent="åµæ¸¬åˆ°è¶Šå—èªèªéŸ³ï¼š"+v.name+" ("+v.lang+")";} else {info.textContent="æœªåµæ¸¬åˆ°è¶Šå—èªèªéŸ³ï¼Œä½¿ç”¨è‹±èª fallbackã€‚å»ºè­°åˆ°ç³»çµ±ä¸‹è¼‰è¶Šå—èª voiceã€‚"}; speak("Xin chÃ o","Xin chao"); }

// Render alphabet
const ab=document.getElementById('alphabet');
ALPHABET.forEach(o=>{const b=document.createElement('button');b.className='card';b.textContent=o.char; b.onclick=()=>speak(o.char,o.say); ab.appendChild(b);});

// Render tones
const tn=document.getElementById('tones');
TONES.forEach(o=>{const b=document.createElement('button');b.className='card';b.textContent=o.mark+" ("+o.desc+")"; b.onclick=()=>speak(o.mark,o.mark); tn.appendChild(b);});

// Numbers + classifiers
const nm=document.getElementById('numbers');
for(let i=1;i<=10;i++){const d=document.createElement('div');d.className='card';d.textContent=i+": "+NUMS[i];d.onclick=()=>speak(NUMS[i],NUMS[i]);nm.appendChild(d);}
COUNTERS.forEach(c=>{const d=document.createElement('div');d.className='card';d.textContent=c.counter+" â€” "+c.note;nm.appendChild(d);});

// Numbers 1-100
const n100=document.getElementById('num100');
for(let i=1;i<=100;i++){const d=document.createElement('div');d.className='card';d.textContent=i+": "+VN100[i];d.onclick=()=>speak(VN100[i],VN100[i]);n100.appendChild(d);}

// Dialogues
const dl=document.getElementById('dialogues');
DIALOGS.forEach(d=>{
  const box=document.createElement('div'); box.className='box'; box.innerHTML="<b>"+d.tag+"</b>";
  d.vi.forEach((line,i)=>{
    const row=document.createElement('div'); row.className='dialogue';
    const left=document.createElement('div'); left.innerHTML='<div>'+(i===0?'â“ ':'ğŸ—£ï¸ ')+line+'</div><div class="small">â€” '+(d.zh[i]||'')+'</div>';
    const right=document.createElement('div'); const sp=document.createElement('button'); sp.className='btn'; sp.textContent='â–¶ æœ—è®€'; sp.onclick=()=>speak(line,line);
    right.appendChild(sp); row.appendChild(left); row.appendChild(right); box.appendChild(row);
  });
  dl.appendChild(box);
});

// Simple random quiz (10 questions)
let quizData=[],score=0,total=0;
function startQuiz(){
  quizData=[]; DIALOGS.forEach(d=>d.vi.forEach((l,i)=>quizData.push({vi:l,zh:d.zh[i]||''})));
  quizData=quizData.sort(()=>Math.random()-0.5).slice(0,10); score=0; total=0; renderQuiz();
}
function renderQuiz(){
  const qd=document.getElementById('quiz');
  if(total>=quizData.length){ qd.innerHTML="å®Œæˆï¼å¾—åˆ†ï¼š"+score+"/"+quizData.length; return; }
  const q=quizData[total]; const allZh=[].concat(...DIALOGS.map(d=>d.zh));
  const opts=new Set([q.zh]); while(opts.size<4) opts.add(allZh[Math.floor(Math.random()*allZh.length)]||"ï¼ˆç©ºï¼‰");
  const list=[...opts].sort(()=>Math.random()-0.5);
  qd.innerHTML="<div>ğŸ—£ï¸ "+q.vi+"</div>";
  list.forEach(opt=>{ const b=document.createElement('button'); b.className='btn ghost'; b.textContent=opt; b.onclick=()=>{ if(opt===q.zh)score++; total++; renderQuiz(); }; qd.appendChild(b); });
}

// Simulated exam (50 questions)
const EXAM=(function(){ const arr=[]; const baseOpts=["ä½ å¥½","å†è¦‹","è¬è¬","å¤šå°‘éŒ¢"]; for(let i=1;i<=50;i++){ const opts=baseOpts.slice().sort(()=>Math.random()-0.5); arr.push({q:`é¡Œç›® ${i}: 'xin chÃ o' çš„æ­£ç¢ºä¸­æ–‡æ„æ€æ˜¯ï¼Ÿ`, ans:"ä½ å¥½", opts}); } return arr; })();
let examIdx=0, examScore=0;
function startExam(){ examIdx=0; examScore=0; renderExam(); }
function renderExam(){
  const div=document.getElementById('exam');
  if(examIdx>=EXAM.length){ div.innerHTML="æ¨¡æ“¬å®Œæˆï¼å¾—åˆ†ï¼š"+examScore+"/"+EXAM.length; return; }
  const q=EXAM[examIdx]; div.innerHTML=`<div><b>${q.q}</b></div>`;
  q.opts.forEach(opt=>{ const b=document.createElement('button'); b.className='btn ghost'; b.textContent=opt; b.onclick=()=>{ if(opt===q.ans) examScore++; examIdx++; renderExam(); }; div.appendChild(b); });
}
</script>
</body>
</html>
